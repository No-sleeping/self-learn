## ACID如何保证

**ACID事务** 是数据库管理系统（DBMS）中确保事务正确可靠的关键概念，包括以下四个特性：

Atomicity：原子性。事务中的所有操作要么全部完成，要么全部不完成，不会结束在中间某个环节。

- 原⼦性由undo log⽇志保证，它记录了需要回滚的⽇志信息，事务回滚时撤销已经执⾏成功的sql

Consistency：一致性。事务开始之前和结束以后，数据库的完整性没有被破坏。

- ⼀致性⼀般由代码层⾯来保证

Isolation：隔离性。数据库允许多个并发事务同时对其数据进行读写和修改的能力，**以防止多个事务并发执行时由于交叉执行而导致数据的不一致**。事务隔离分为不同级别，包括**读未提交**（Read uncommitted）、**读提交**（read committed）、**可重复读**（repeatable read）和**串行化**（Serializable）。

- 隔离性由MVCC来保证

Durability：持久性。一个事务一旦提交，它对数据库中的数据的改变就应该是永久性的。

- 持久性由内存+redo log来保证，mysql修改数据同时在内存和redo log记录这次操作，事务提交的时候通过redo log刷盘，宕机的时候可以从redo log恢复

补充参考：[binlog、redolog、undolog](https://blog.csdn.net/Mango_Bin/article/details/125297648)

<br/>

## redis 击穿、穿透、雪崩

## zset实现

底层实现 hash表 + 跳表（ziplist）。

hash表用于存储数据，ziplist用于按照score维护顺序。

## redis淘汰策略

在 redis 中，允许用户设置最大使用内存大小通过配置redis.conf中的maxmemory这个值来开启内存淘汰功能，在内存限定的情况下是很有用的。

设置最大内存大小可以保证redis对外提供稳健服务。

redis 提供 6种数据淘汰策略：

volatile-lru：从已设置过期时间的数据集（server. db[i]. expires）中挑选最近最少使用的数据淘汰。

volatile-ttl：从已设置过期时间的数据集（server. db[i]. expires）中挑选将要过期的数据淘汰。

volatile-random：从已设置过期时间的数据集（server. db[i]. expires）中任意选择数据淘汰。

allkeys-lru：从数据集（server. db[i]. dict）中挑选最近最少使用的数据淘汰。

allkeys-random：从数据集（server. db[i]. dict）中任意选择数据淘汰。

no-enviction（驱逐）：禁止驱逐数据。

<br/>

<br/>

##  redis  namespace

Redis Namespace，也称为命名空间，是一种将多个独立的命名空间隔离在同一个Redis实例中的机制。通过使用命名空间，您可以为每个应用程序或环境创建一个独立的命名空间，以便更好地管理和隔离数据。

优势：

- 数据隔离：使用命名空间可以将不同应用程序或环境的数据进行隔离，确保数据的安全性和独立性。
- 简化管理：通过命名空间，您可以为每个应用程序或环境设置独立的配置、权限和监控，简化了Redis的管理工作。
- 减少命名冲突：在大型系统中，多个应用程序或环境可能使用相同的键名，导致命名冲突。使用命名空间可以避免这种情况，确保每个应用程序或环境使用独特的键名。

注意：

- 不同的命名空间仍然**共享相同**的数据库和持久化功能
- 由于不同的应用程序或环境可能具有不同的安全需求和访问级别，因此对每个命名空间进行独立的权限管理至关重要。
- 不同的Redis版本可能对Namespace的支持程度不同。
- 由于每个命名空间具有独立的配置和数据集，因此对每个命名空间的性能和日志记录进行独立监控非常重要。
- 在使用Redis Namespace时，务必谨慎操作。在删除或重置命名空间之前，请确保备份重要的数据和配置信息。同时，确保在执行此类操作时不会影响到其他应用程序或环境的数据安全性和可用性。
